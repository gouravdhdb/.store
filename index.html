<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thedecken.store</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel= "stylesheet" <href="Style.css">
</head>
<body>
  <header>
    <div class="menu-toggle" onclick="toggleMenu()">‚ò∞|</div>
    <h1>Thedecken.store</h1>
  </header>

  <div class="sidebar" id="sidebar">
    <ul>
      <li onclick="showSection('home')">üè† Home</li>
      <li onclick="showSection('cart')">üõí Cart</li>
      <li onclick="showSection('orders')">üì¶ Orders</li>
      <li onclick="showSection('vouchers')">üéüÔ∏è Vouchers</li> <li onclick="showSection('settings')">‚öôÔ∏è Settings</li>
    </ul>
  </div>
<a href="tel:+911613145098" class="call-float" title="Call Us">
  <img src="call-icon.png" alt="Call Now" />
</a>
  <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleMenu()"></div>

  <div class="main-content-wrapper" id="mainContentWrapper">
    <section class="section active" id="home">
        <!-- 1 -->
<div class="product">  
    <img src="images.jpeg" alt="Nailpolish">  
    <h3>Nailpolish</h3>  
    <p><span style="color: gray;"><del>‚Çπ69</del></span>  
    <span style="color: chiffon; font-weight: bold;">‚Çπ49 only</span></p>  
    <p>Buy 2 get 1 free product.</p>  
    <button class="add-to-cart" onclick="addToCart('Nailpolish', 49)">Add to Cart</button>  
    <button class="buy-now" onclick="openModal('Nailpolish', 49)">Buy Now</button>  
</div>

<!-- 2 -->
<div class="product">  
    <img src="Kajal Stick.jpg" alt="Kajal Stick">  
    <h3>Kajal Stick</h3>  
    <p><span style="color: gray;"><del>‚Çπ50</del></span>  
    <span style="color: chiffon; font-weight: bold;">‚Çπ40 only</span></p>  
    <p>Buy 2 get 1 free product.</p>  
    <button class="add-to-cart" onclick="addToCart('Kajal Stick', 40)">Add to Cart</button>  
    <button class="buy-now" onclick="openModal('Kajal Stick', 40)">Buy Now</button>  
</div>

<!-- 3 -->
<div class="product">  
    <img src="Mini Eyeliner.jpg" alt="Mini Eyeliner">  
    <h3>Mini Eyeliner</h3>  
    <p><span style="color: gray;"><del>‚Çπ55</del></span>  
    <span style="color: chiffon; font-weight: bold;">‚Çπ45 only</span></p>  
    <p>Buy 2 get 1 free product.</p>  
    <button class="add-to-cart" onclick="addToCart('Mini Eyeliner', 45)">Add to Cart</button>  
    <button class="buy-now" onclick="openModal('Mini Eyeliner', 45)">Buy Now</button>  
</div>

<!-- 4 -->
<div class="product">  
    <img src="CompactPowder.jpg" alt="Compact Powder">  
    <h3>Compact Powder</h3>  
    <p><span style="color: gray;"><del>‚Çπ60</del></span>  
    <span style="color: chiffon; font-weight: bold;">‚Çπ50 only</span></p>  
    <p>Buy 2 get 1 free product.</p>  
    <button class="add-to-cart" onclick="addToCart('Compact Powder', 50)">Add to Cart</button>  
    <button class="buy-now" onclick="openModal('Compact Powder', 50)">Buy Now</button>  
</div>

<!-- 5 -->
<div class="product">  
    <img src="Mini Lipstick.jpg" alt="Mini Lipstick">  
    <h3>Mini Lipstick</h3>  
    <p><span style="color: gray;"><del>‚Çπ55</del></span>  
    <span style="color: chiffon; font-weight: bold;">‚Çπ45 only</span></p>  
    <p>Buy 2 get 1 free product.</p>  
    <button class="add-to-cart" onclick="addToCart('Mini Lipstick', 45)">Add to Cart</button>  
    <button class="buy-now" onclick="openModal('Mini Lipstick', 45)">Buy Now</button>  
</div>

<!-- 6 -->
<div class="product">  
    <img src="Lip Balm.jpg" alt="Lip Balm">  
    <h3>Lip Balm</h3>  
    <p><span style="color: gray;"><del>‚Çπ50</del></span>  
    <span style="color: chiffon; font-weight: bold;">‚Çπ40 only</span></p>  
    <p>Buy 2 get 1 free product.</p>  
    <button class="add-to-cart" onclick="addToCart('Lip Balm', 40)">Add to Cart</button>  
    <button class="buy-now" onclick="openModal('Lip Balm', 40)">Buy Now</button>  
</div>

<!-- 7 -->
<div class="product">  
    <img src="EyebrowPencil.jpg" alt="Eyebrow Pencil">  
    <h3>Eyebrow Pencil</h3>  
    <p><span style="color: gray;"><del>‚Çπ45</del></span>  
    <span style="color: chiffon; font-weight: bold;">‚Çπ33 only</span></p>  
    <p>Buy 2 get 1 free product.</p>  
    <button class="add-to-cart" onclick="addToCart('Eyebrow Pencil', 33)">Add to Cart</button>  
    <button class="buy-now" onclick="openModal('Eyebrow Pencil', 33)">Buy Now</button>  
</div>

<!-- 8 -->
<div class="product">  
    <img src="MakeupSponge.jpg" alt="Makeup Sponge">  
    <h3>Makeup Sponge</h3>  
    <p><span style="color: gray;"><del>‚Çπ50</del></span>  
    <span style="color: chiffon; font-weight: bold;">‚Çπ43 only</span></p>  
    <p>Buy 2 get 1 free product.
    Buy upto 89rs for Free Dilivery</p>  
    <button class="add-to-cart" onclick="addToCart('Makeup Sponge', 43)">Add to Cart</button>  
    <button class="buy-now" onclick="openModal('Makeup Sponge', 43)">Buy Now</button>  
</div>

<!-- 9 -->
<div class="product">  
    <img src="MehndiCone.jpg" alt="Mehndi Cone">  
    <h3>Mehndi Cone</h3>  
    <p><span style="color: gray;"><del>‚Çπ35</del></span>  
    <span style="color: chiffon; font-weight: bold;">‚Çπ25 only</span></p>  
    <p>Buy 2 get 1 free product.</p>  
    <button class="add-to-cart" onclick="addToCart('Mehndi Cone', 25)">Add to Cart</button>  
    <button class="buy-now" onclick="openModal('Mehndi Cone', 25)">Buy Now</button>  
</div>

<!-- 10 -->
<div class="product">  
    <img src="BindiPack.jpg" alt="Bindi Pack">  
    <h3>Bindi Pack</h3>  
    <p><span style="color: gray;"><del>‚Çπ45</del></span>  
    <span style="color: chiffon; font-weight: bold;">‚Çπ30 only</span></p>  
    <p>Buy 2 get 1 free product.</p>  
    <button class="add-to-cart" onclick="addToCart('Bindi Pack', 30)">Add to Cart</button>  
    <button class="buy-now" onclick="openModal('Bindi Pack', 30)">Buy Now</button>  
</div>
      <div class="products">
        <div class="product">
          <img src="Kurkure.jpg" alt="Kurkure">
          <h3>Kurkure</h3>
          <p>‚Çπ59</p>
          <p>250g wala sirf 59 me.
          free Delivery</p>
          <button class="add-to-cart" onclick="addToCart('Kurkure', 59)">Add to Cart</button>
          <button class="buy-now" onclick="openModal('Kurkure', 59)">Buy Now</button>
        </div>
        <div class="product">
          <img src="Coalgate.jpg" alt="Coalgate">
          <h3>Coalgate</h3>
          <p>‚Çπ189</p>
          <p>buy one get one free</p>
          <button class="add-to-cart" onclick="addToCart('Coalgate', 189)">Add to Cart</button>
          <button class="buy-now" onclick="openModal('Coalgate', 189)">Buy Now</button>
        </div>
        <div class="product">
            <img src="images (1).jpeg" alt="Cold cream">
            <h3>Cold cream</h3>
            <p>‚Çπ59</p>
            <p>Buy 2 Cold cream and get 1 free product.</p>
            <button class="add-to-cart" onclick="addToCart('Cold cream', 59)">Add to Cart</button>
            <button class="buy-now" onclick="openModal('Cold cream', 59)">Buy Now</button>
        </div>
      </div>
    </section>

    <section class="section" id="cart">
      <h2>Your Cart</h2>
      <div id="cart-items-container" class="cart-items">
        </div>
      <p id="empty-cart-message" class="empty-cart-message" style="display: none;">Your cart is empty.</p>
      <div id="cart-summary" style="margin-top: 2rem; font-size: 1.3rem; font-weight: 600; text-align: right;">
        Total: ‚Çπ<span id="cart-total">0</span>
        <span id="discount-display" style="color: var(--button-secondary); margin-left: 10px; display: none;"> (Discount: ‚Çπ<span id="discount-amount">0</span>)</span>
        <br>
        <span id="final-total-display" style="font-size: 1.5rem; color: var(--primary);">Final Total: ‚Çπ<span id="final-cart-total">0</span></span>
      </div>
      <button onclick="openModal('cart')" style="width: 100%; margin-top: 2rem; padding: 1rem; font-size: 1.2rem;">Proceed to Checkout</button>
    </section>

    <section class="section" id="orders">
      <h2>Your Orders</h2>
      <div id="order-history-container" class="order-items">
        </div>
      <p id="empty-orders-message" class="empty-orders-message" style="display: none;">You haven't placed any orders yet.</p>
    </section>

    <section class="section" id="vouchers">
        <h2>Apply Voucher</h2>
        <div class="voucher-container">
            <h3>Have a discount code?</h3>
            <input type="text" id="voucher-input" placeholder="Enter voucher code" oninput="this.value = this.value.toUpperCase()">
            <button onclick="applyVoucher()">Apply Voucher</button>
            <p id="voucher-message" class="voucher-message"></p>
        </div>
    </section>


    <section class="section" id="settings">
        <h2>Settings</h2>
        <div class="settings-item">
            <label for="darkModeToggle">Dark Mode</label>
            <label class="switch">
                <input type="checkbox" id="darkModeToggle">
                <span class="slider"></span>
            </label>
        </div>
    </section>
  </div>

  <div class="modal-overlay" id="checkout-modal-overlay">
    <div class="modal" id="checkout-modal">
      <h3 id="modal-title">Complete Your Order</h3>
      <input type="text" id="name-input" placeholder="Full Name" />
      <textarea id="address-input" placeholder="Delivery Address" rows="3"></textarea> <input type="tel" id="phone-input" placeholder="Phone Number" />
      <input type="text" id="upi-input" placeholder="UPI ID (Optional)" /> <select id="payment-method-select">
        <option value="">Select Payment Method</option>
        <option value="Cash on Delivery">Cash on Delivery</option>
        <option value="Online Payment">Online Payment </option>
      </select>
      <button onclick="placeOrder()" onclick="redirectTopayment()" >Place Order</button>
      <button class="cancel-btn" onclick="closeModal()">Cancel</button>
    </div>
  </div>
<footer style="text-align: center; padding: 20px; background-color: #f8f8f8;">
  <a href="terms.html" style="color: #e91e63; text-decoration: none; font-weight: bold;">
    Terms and Conditions
  </a>
</footer>
  <div id="notification" class="notification"></div>

 <script>
    const vouchersData = {
        "SAVE10": { type: "percentage", value: 2.10, used: false, minCartValue: 100 },
        "FLAT50": { type: "flat", value: 25, used: false, minCartValue: 200 },
        "FREEDEL": { type: "flat", value: 30, used: false, minCartValue: 250 }
    };

    document.addEventListener('DOMContentLoaded', () => {
        const isDarkMode = localStorage.getItem('darkMode') === 'true';
        document.body.classList.toggle('dark-mode', isDarkMode);
        document.getElementById('darkModeToggle').checked = isDarkMode;
        updateCartDisplay();
        updateOrderDisplay();
        showSection('home');
    });

    function showNotification(message, isSuccess = true) {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.style.backgroundColor = isSuccess ? '#28a745' : '#dc3545';
      notification.classList.add('show');
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    function toggleMenu() {
      document.getElementById('sidebar').classList.toggle('active');
      document.getElementById('sidebarOverlay').classList.toggle('active');
      document.body.classList.toggle('sidebar-open');
    }

    function showSection(sectionId) {
      document.querySelectorAll('.section').forEach(section => {
        section.classList.remove('active');
      });
      document.getElementById(sectionId).classList.add('active');
      if (window.innerWidth < 768) {
          toggleMenu();
      }
      if (sectionId === 'cart') {
          updateCartDisplay();
      } else if (sectionId === 'orders') {
          updateOrderDisplay();
      } else if (sectionId === 'vouchers') {
          const voucherMessage = document.getElementById('voucher-message');
          voucherMessage.textContent = '';
          voucherMessage.className = 'voucher-message';
          document.getElementById('voucher-input').value = '';
      }
    }

    function addToCart(name, price) {
      const existingItem = cart.find(item => item.name === name);
      if (existingItem) {
        existingItem.quantity++;
      } else {
        cart.push({ name, price, quantity: 1 });
      }
      localStorage.setItem('cart', JSON.stringify(cart));
      showNotification(`${name} added to cart!`);
      updateCartDisplay();
    }

    function updateCartDisplay() {
      const cartItemsContainer = document.getElementById('cart-items-container');
      const emptyCartMessage = document.getElementById('empty-cart-message');
      const cartSummary = document.getElementById('cart-summary');
      cartItemsContainer.innerHTML = '';
      let subtotal = 0;

      if (cart.length === 0) {
        emptyCartMessage.style.display = 'block';
        cartSummary.style.display = 'none';
      } else {
        emptyCartMessage.style.display = 'none';
        cartSummary.style.display = 'block';
        cart.forEach((item, index) => {
          subtotal += item.price * item.quantity;
          const itemDiv = document.createElement('div');
          itemDiv.classList.add('cart-item');
          itemDiv.innerHTML = `
            <div class="cart-item-details">
              <h4 class="item-name">${item.name} (x${item.quantity})</h4>
              <p class="item-price">‚Çπ${item.price * item.quantity}</p>
            </div>
            <div class="cart-item-actions">
              <button class="buy-btn" onclick="increaseQuantity(${index})">+</button>
              <button class="remove-btn" onclick="decreaseQuantity(${index})">-</button>
              <button class="remove-btn" onclick="removeFromCart(${index})">Remove</button>
            </div>
          `;
          cartItemsContainer.appendChild(itemDiv);
        });
      }
      calculateTotal(subtotal);
    }

    function increaseQuantity(index) {
        cart[index].quantity++;
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartDisplay();
    }

    function decreaseQuantity(index) {
        if (cart[index].quantity > 1) {
            cart[index].quantity--;
        } else {
            cart.splice(index, 1);
        }
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartDisplay();
    }

    function removeFromCart(index) {
      const removedItemName = cart[index].name;
      cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      showNotification(`${removedItemName} removed from cart.`, false);
      updateCartDisplay();
    }

    function calculateTotal(subtotal) {
        document.getElementById('cart-total').textContent = subtotal;
        let finalTotal = subtotal;
        const discountDisplay = document.getElementById('discount-display');
        const discountAmountSpan = document.getElementById('discount-amount');
        const finalCartTotalSpan = document.getElementById('final-cart-total');

        if (currentVoucherDiscount > 0) {
            finalTotal = subtotal - currentVoucherDiscount;
            if (finalTotal < 0) finalTotal = 0;
            discountAmountSpan.textContent = currentVoucherDiscount.toFixed(2);
            discountDisplay.style.display = 'inline';
        } else {
            discountDisplay.style.display = 'none';
        }
        finalCartTotalSpan.textContent = finalTotal.toFixed(2);
    }

    function openModal(item, price = 0) {
      if (item === 'cart' && cart.length === 0) {
        showNotification('Your cart is empty. Add items before proceeding to checkout.', false);
        return;
      }

      const modalOverlay = document.getElementById('checkout-modal-overlay');
      const modalTitle = document.getElementById('modal-title');

      if (item === 'cart') {
        modalTitle.textContent = 'Complete Your Order (Cart)';
      } else {
        modalTitle.textContent = `Buy ${item} for ‚Çπ${price}`;
      }

      modalOverlay.style.display = 'flex';
    }

    function closeModal() {
      document.getElementById('checkout-modal-overlay').style.display = 'none';
      document.getElementById('name-input').value = '';
      document.getElementById('address-input').value = '';
      document.getElementById('phone-input').value = '';
      document.getElementById('upi-input').value = '';
      document.getElementById('payment-method-select').value = '';
    }

    async function placeOrder() {
      const name = document.getElementById('name-input').value.trim();
      const address = document.getElementById('address-input').value.trim();
      const phone = document.getElementById('phone-input').value.trim();
      const upiId = document.getElementById('upi-input').value.trim();
      const paymentMethod = document.getElementById('payment-method-select').value;

      if (!name || !address || !phone || !paymentMethod) {
        showNotification('Please fill in all delivery details and select a payment method.', false);
        return;
      }

      let itemsToOrder = [];
      let orderTotal = 0;

      if (document.getElementById('modal-title').textContent.includes('Cart')) {
        itemsToOrder = [...cart];
        orderTotal = parseFloat(document.getElementById('final-cart-total').textContent);
      } else {
        const productName = document.getElementById('modal-title').textContent.split(' for ')[0].replace('Buy ', '');
        const productPrice = parseFloat(document.getElementById('modal-title').textContent.split('‚Çπ')[1]);
        itemsToOrder = [{ name: productName, price: productPrice, quantity: 1 }];
        orderTotal = productPrice;
      }

      const newOrder = {
        id: Date.now(),
        items: itemsToOrder,
        total: orderTotal,
        discountApplied: currentVoucherDiscount,
        customer: { name, address, phone, upiId },
        paymentMethod: paymentMethod,
        date: new Date().toLocaleString(),
        status: 'Pending'
      };

      orders.unshift(newOrder);
      localStorage.setItem('orders', JSON.stringify(orders));

      await fetch(`https://api.telegram.org/bot7942211815:AAGo9GylL7zO_SUWWkqJn1AFH40DO-Q0cqY/sendMessage`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          chat_id: '-4891793325',
          text: `üõí New Order from ${name}
üìç Address: ${address}
üìû Phone: ${phone}
üí≥ Payment: ${paymentMethod}
üì¶ Items: ${itemsToOrder.map(i => `${i.name} (x${i.quantity}) - ‚Çπ${i.price * i.quantity}`).join(', ')}
üí∞ Total: ‚Çπ${orderTotal}
üßæ Discount: ‚Çπ${currentVoucherDiscount}`
        })
      });

      if (document.getElementById('modal-title').textContent.includes('Cart')) {
        cart = [];
        localStorage.setItem('cart', JSON.stringify(cart));
        currentVoucherDiscount = 0;
      }

      closeModal();
      showNotification('Order placed successfully! Details sent to Telegram.');
      updateCartDisplay();
      updateOrderDisplay();
      showSection('orders');
    }

    function updateOrderDisplay() {
      const orderHistoryContainer = document.getElementById('order-history-container');
      const emptyOrdersMessage = document.getElementById('empty-orders-message');
      orderHistoryContainer.innerHTML = '';

      if (orders.length === 0) {
        emptyOrdersMessage.style.display = 'block';
      } else {
        emptyOrdersMessage.style.display = 'none';
        orders.forEach(order => {
          const orderDiv = document.createElement('div');
          orderDiv.classList.add('order-item');
          const itemsList = order.items.map(item => `${item.name} (x${item.quantity}) - ‚Çπ${item.price * item.quantity}`).join('<br>');
          const discountInfo = order.discountApplied > 0 ? `<p style="color: var(--button-secondary); font-size:0.9rem;">Discount: -‚Çπ${order.discountApplied.toFixed(2)}</p>` : '';
          const upiInfo = order.customer.upiId ? `<p style="font-size: 0.9rem; color: var(--secondary);">UPI ID: ${order.customer.upiId}</p>` : '';

          orderDiv.innerHTML = `
            <div class="order-item-details">
              <h4>Order ID: #${order.id}</h4>
              <p>Items: <br>${itemsList}</p>
              <p>Total: ‚Çπ${order.total.toFixed(2)}</p>
              ${discountInfo}
              <p style="font-size: 0.9rem; color: var(--secondary);">Placed on: ${order.date}</p>
              <p style="font-size: 0.9rem; color: var(--secondary);">Payment: ${order.paymentMethod}</p>
              <p style="font-size: 0.9rem; color: var(--secondary);">Name: ${order.customer.name}</p>
              <p style="font-size: 0.9rem; color: var(--secondary);">Address: ${order.customer.address}</p>
              <p style="font-size: 0.9rem; color: var(--secondary);">Phone: ${order.customer.phone}</p>
              ${upiInfo}
            </div>
            <div class="order-item-tracking">
              <p>Status: <span style="font-weight: 600; color: ${order.status === 'Pending' ? '#ffc107' : '#28a745'}">${order.status}</span></p>
            </div>
          `;
          orderHistoryContainer.appendChild(orderDiv);
        });
      }
    }

    const darkModeToggle = document.getElementById('darkModeToggle');
    darkModeToggle.addEventListener('change', () => {
        document.body.classList.toggle('dark-mode', darkModeToggle.checked);
        localStorage.setItem('darkMode', darkModeToggle.checked);
    });

    function applyVoucher() {
        const voucherInput = document.getElementById('voucher-input');
        const voucherCode = voucherInput.value.trim().toUpperCase();
        const voucherMessage = document.getElementById('voucher-message');
        const currentCartSubtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

        voucherMessage.textContent = '';
        voucherMessage.className = 'voucher-message';

        if (!voucherCode) {
            voucherMessage.textContent = 'Please enter a voucher code.';
            voucherMessage.classList.add('error');
            return;
        }

        const voucher = vouchersData[voucherCode];

        if (!voucher) {
            voucherMessage.textContent = 'Invalid voucher code.';
            voucherMessage.classList.add('error');
            return;
        }

        if (voucher.used) {
            voucherMessage.textContent = 'This voucher has already been used.';
            voucherMessage.classList.add('error');
            return;
        }

        if (currentCartSubtotal < voucher.minCartValue) {
            voucherMessage.textContent = `Cart total must be at least ‚Çπ${voucher.minCartValue} to use this voucher.`;
            voucherMessage.classList.add('error');
            return;
        }

        let discountAmount = 0;
        if (voucher.type === "percentage") {
            discountAmount = currentCartSubtotal * (voucher.value / 100);
        } else if (voucher.type === "flat") {
            discountAmount = voucher.value;
        }

        currentVoucherDiscount = discountAmount;
        voucher.used = true;
        vouchersData[voucherCode].used = true;

        showNotification(`Voucher "${voucherCode}" applied! You got ‚Çπ${discountAmount.toFixed(2)} off.`, true);
        voucherMessage.textContent = `Voucher "${voucherCode}" applied successfully! You saved ‚Çπ${discountAmount.toFixed(2)}.`;
        voucherMessage.classList.add('success');

        updateCartDisplay();
    }
</script>
</body>
</html>
